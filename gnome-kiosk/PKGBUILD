pkgname=gnome-kiosk
pkgver=43.0
pkgrel=1
pkgdesc='mutter based compositor for kiosks'
url='https://gitlab.gnome.org/GNOME/gnome-kiosk'
source=("https://gitlab.gnome.org/GNOME/gnome-kiosk/-/archive/${pkgver}/gnome-kiosk-${pkgver}.zip"
        'patch')
sha256sums=('SKIP'
            'd996b0a8d8b88f78fcafe3eb4b75a49de954d4cf75f66f64a0f66812e8aa01e6')
arch=('x86_64')
license=('GPL-2.0-or-later')
makedepends=('meson' 'patch')
depends=('gnome-desktop' 'gdm')

build () {
	cd $srcdir/$pkgname-$pkgver

	meson --prefix=/usr build
}

package() {
	cd $srcdir/$pkgname-$pkgver

	meson install -C build --destdir $pkgdir
	patch $pkgdir/usr/bin/gnome-kiosk-script < ../patch
}
