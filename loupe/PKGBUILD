pkgname=loupe
pkgver=44.2
pkgrel=1
pkgdesc='A simple image viewer application written with GTK4 and Rust'
url='https://gitlab.gnome.org/Incubator/loupe'
source=("https://gitlab.gnome.org/Incubator/${pkgname}/-/archive/${pkgver}/${pkgname}-${pkgver}.tar.gz"
        'patch')
sha256sums=('470e542d1f9ff72883f2b2853cca82ad268a8686a1621b5e593c2299be2eb42f'
            '912c429c8144678e0546227e792f894cec7876aec34e83b8690a0ffc468ce805')
arch=('x86_64')
license=('GPL3')
makedepends=('meson' 'rust' 'cargo')
depends=('gtk4' 'desktop-file-utils' 'libadwaita' 'libgweather-4' 'libheif' 'glib2' 'gettext')

build() {
	cd "$srcdir/$pkgname-$pkgver"

	patch ./meson.build < ../patch
	arch-meson . build --buildtype release
}

package() {
	cd "$srcdir/$pkgname-$pkgver"

	meson install -C build --destdir $pkgdir
}
